const navMenu=document.getElementById("nav-menu"),navToggle=document.getElementById("nav-toggle"),navClose=document.getElementById("nav-close");navToggle&&navToggle.addEventListener("click",()=>{navMenu.classList.add("show-menu")}),navClose&&navClose.addEventListener("click",()=>{navMenu.classList.remove("show-menu")});const navLink=document.querySelectorAll(".nav__link");function linkAction(){document.getElementById("nav-menu").classList.remove("show-menu")}function scrollHeader(){const t=document.getElementById("header");this.scrollY>=80?t.classList.add("scroll-header"):t.classList.remove("scroll-header")}function scrollUp(){const t=document.getElementById("scroll-up");this.scrollY>=400?t.classList.add("show-scroll"):t.classList.remove("show-scroll")}navLink.forEach(t=>t.addEventListener("click",linkAction)),window.addEventListener("scroll",scrollHeader),window.addEventListener("scroll",scrollUp);let products=[{id:1,name:" Xương rồng tròn",price:5e4,image:"static/img/product1.png"},{id:2,name:" Lưỡi hổ lá bầu",price:6e4,image:"static/img/product2.png"},{id:3,name:" Trầu bà",price:4e4,image:"static/img/product3.png"},{id:4,name:" Xương rồng tai thỏ",price:45e3,image:"static/img/product4.png"},{id:5,name:" Cây lan",price:1e5,image:"static/img/product5.png"},{id:6,name:" Cây ngà voi",price:7e4,image:"static/img/product6.png"},{id:7,name:" Cây lá sọc dưa",price:65e3,image:"static/img/product7.png"},{id:8,name:" Cây chuỗi ngọc",price:5e4,image:"static/img/product8.png"}],iconCart=document.querySelector(".icon-cart"),closeCart=document.querySelector(".close"),cart=document.querySelector(".cart"),listProductHTML=document.querySelector(".list-products"),listCardHTML=document.querySelector(".listCart"),iconCartSpan=document.querySelector(".icon-cart span"),totalPriceSpan=document.querySelector(".totalPrice .total span"),taxSpan=document.querySelector(".totalPrice .tax span"),listProducts=[],carts=[];closeCart.addEventListener("click",()=>{cart.classList.toggle("show-cart")}),iconCart.addEventListener("click",()=>{cart.classList.toggle("show-cart")});const addDataToHTML=()=>{listProductHTML.innerHTML="",listProducts.length>0&&listProducts.forEach(t=>{let e=document.createElement("div");e.classList.add("product__item"),e.dataset.id=t.id,e.innerHTML=`\n            <img src="${t.image}" class="product__img">\n            <h3>${t.name}</h3>\n            <span>${t.price} VND</span>\n            <button class="button--flex product__button">\n                Thêm Vào Giỏ Hàng\n            </button>\n            `,listProductHTML.appendChild(e)})};listProductHTML.addEventListener("click",t=>{let e=t.target;if(e.classList.contains("product__button")){let t=e.parentElement.dataset.id;addToCart(t)}});const addToCart=t=>{let e=carts.findIndex(e=>e.product_id==t);carts.length<=0?carts=[{product_id:t,quantity:1}]:e<0?carts.push({product_id:t,quantity:1}):carts[e].quantity=carts[e].quantity+1,addCartToHTML(),addCartToMemory()},addCartToMemory=()=>{localStorage.setItem("carts",JSON.stringify(carts))},addCartToHTML=()=>{listCardHTML.innerHTML="";let t=0,e=0,n=0;carts.length>0&&carts.forEach(a=>{t+=a.quantity;let c=document.createElement("div"),s=products.findIndex(t=>t.id==a.product_id),r=products[s];n+=a.quantity*r.price*.1,e+=a.quantity*r.price+n,c.classList.add("cartItem"),c.dataset.id=a.product_id,c.innerHTML=`\n            <img src="${r.image}" class="cart__img">\n            <h3>${r.name}</h3>\n            <span>${currency(r.price*a.quantity,{symbol:"",separator:".",decimal:","}).format().replace(/(\.|,)00$/g,"")}đ</span>\n            <div class="quantity">\n                <span class="minus"><</span>\n                <span>${a.quantity}</span>\n                <span class="plus">></span>\n            </div>\n            `,listCardHTML.appendChild(c)}),iconCartSpan.innerText=t,taxSpan.innerText=currency(n,{symbol:"",separator:".",decimal:","}).format().replace(/(\.|,)00$/g,""),totalPriceSpan.innerText=currency(e,{symbol:"",separator:".",decimal:","}).format().replace(/(\.|,)00$/g,"")};listCardHTML.addEventListener("click",t=>{let e=t.target;if(e.classList.contains("minus")||e.classList.contains("plus")){let t=e.parentElement.parentElement.dataset.id,n="minus";e.classList.contains("plus")&&(n="plus"),changeQuantityCart(t,n)}});const changeQuantityCart=(t,e)=>{let n=carts.findIndex(e=>e.product_id==t);if(n>=0){carts[n];switch(e){case"plus":carts[n].quantity=carts[n].quantity+1;break;default:let t=carts[n].quantity-1;t>0?carts[n].quantity=t:carts.splice(n,1)}}addCartToHTML(),addCartToMemory()},initApp=()=>{fetch("products.json").then(t=>t.json()).then(t=>{listProducts=t,console.log(listProducts),listProductHTML.innerHTML="",listProducts.length>0&&listProducts.forEach(t=>{let e=document.createElement("div");e.classList.add("product__item"),e.dataset.id=t.id,e.innerHTML=`\n            <img src="${t.image}" class="product__img">\n            <h3>${t.name}</h3>\n            <span>${t.price} VND</span>\n            <button class="button--flex product__button">\n                Thêm Vào Giỏ Hàng\n            </button>\n            `,listProductHTML.appendChild(e)}),localStorage.getItem("carts")&&(carts=JSON.parse(localStorage.getItem("carts")),addCartToHTML())})};fetch("products.json").then(t=>t.json()).then(t=>{listProducts=t,console.log(listProducts),listProductHTML.innerHTML="",listProducts.length>0&&listProducts.forEach(t=>{let e=document.createElement("div");e.classList.add("product__item"),e.dataset.id=t.id,e.innerHTML=`\n            <img src="${t.image}" class="product__img">\n            <h3>${t.name}</h3>\n            <span>${t.price} VND</span>\n            <button class="button--flex product__button">\n                Thêm Vào Giỏ Hàng\n            </button>\n            `,listProductHTML.appendChild(e)}),localStorage.getItem("carts")&&(carts=JSON.parse(localStorage.getItem("carts")),addCartToHTML())});